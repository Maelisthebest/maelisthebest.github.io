<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mael Homepage</title>
  <style>
    body { font-family: Arial; max-width: 800px; margin: auto; text-align: center; }
    input { padding: 5px; margin: 5px; }
    button { padding: 5px; margin: 5px; }
    a { display: block; margin: 20px; font-size: 1.2em; color: #0077cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
<h1>Willkommen auf Mael's Homepage!</h1>

<div id="auth">
  <h2>Login fÃ¼r privaten Bereich</h2>
  <input type="password" id="pass" placeholder="Passwort" />
  <button onclick="unlockPrivate()">Einloggen</button>
</div>

<div id="main" style="display:none;">
  <p>Privater Bereich freigeschaltet âœ…</p>
  <a href="chat.html">ðŸ’¬ Zum Chat</a>
  <button onclick="logout()">Abmelden</button>
</div>

<script>
const storedHash = "03ac674216f3e15c761ee1a5e255f067953623c8f966f2d6c0f4c7f0a8d8f2f6"; // SHA-256 von "1234"

// PrÃ¼fen beim Laden
async function checkLogin() {
  const hash = localStorage.getItem('loggedPass');
  if(hash && hash === storedHash) {
    document.getElementById('auth').style.display = 'none';
    document.getElementById('main').style.display = 'block';
  }
}

// Passwort-Login
async function unlockPrivate() {
  const passInput = document.getElementById('pass').value;
  const enc = new TextEncoder();
  const hashBuffer = await crypto.subtle.digest('SHA-256', enc.encode(passInput));
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  const hashHex = hashArray.map(b => b.toString(16).padStart(2,'0')).join('');

  if(hashHex === storedHash) {
    localStorage.setItem('loggedPass', hashHex);
    document.getElementById('auth').style.display = 'none';
    document.getElementById('main').style.display = 'block';
  } else {
    alert("Falsches Passwort!");
  }
}

// Logout
function logout() {
  localStorage.removeItem('loggedPass');
  document.getElementById('auth').style.display = 'block';
  document.getElementById('main').style.display = 'none';
}

window.addEventListener('load', checkLogin);
</script>
</body>
</html>
